<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Seventeen Sahabatku</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
:root {
    --color-primary: #3d5a80;
    --color-secondary: #98c1d9;
    --color-accent: #ee6c4d;
    --color-light: #e0fbfc;
    --color-dark: #293241;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Montserrat', sans-serif;
    text-align: center;
    padding: 10px;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--color-light) 0%, #f0f5f9 50%, var(--color-light) 100%);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    position: relative;
    overflow-x: hidden;
}

button {
    border: none;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: bold;
    color: white;
    background: linear-gradient(145deg, #29ff98, #458514);
    font-size: 18px;
    padding: 15px 30px;
    box-shadow: 0 4px 15px rgba(63, 81, 181, 0.2);
}

button:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 20px rgba(20, 149, 255, 0.3);
}

#musicStart {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    backdrop-filter: blur(8px);
    transition: opacity 0.5s ease;
}

#nameInput {
    background: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(41, 50, 65, 0.1);
    max-width: 600px;
    margin: 50px auto;
}

#nameInput h2 {
    color: #3949ab;
    font-size: 28px;
    margin-bottom: 25px;
}

#nameButtons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin: 25px 0;
}

#nameButtons button {
    background: linear-gradient(145deg, #5c6bc0, #3f51b5);
    padding: 20px;
}

#nameButtons button.selected {
    background: linear-gradient(145deg, #303f9f, #283593);
    transform: scale(1.05);
}

.selected-name-display {
    background: #f5f5f5;
    padding: 15px;
    border-radius: 12px;
    font-size: 20px;
    color: #4a6a9e;
    margin: 20px 0;
}

#mainContent {
    display: none;
    animation: fadeIn 1s forwards;
    padding: 20px;
}

#mainContent h1 {
    color: var(--color-primary);
    font-size: 32px;
    margin: 20px 0;
}

.btn-start {
    background: linear-gradient(145deg, var(--color-accent), #d65d40) !important;
    font-size: 20px !important;
    padding: 20px 40px !important;
}

#candleContainer {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin: 30px 0;
}

.candle {
    width: 30px;
    height: 140px;
    background: linear-gradient(to bottom, #f5f5f5, #bdbdbd);
    border-radius: 15px 15px 5px 5px;
    position: relative;
    cursor: pointer;
}

.candle::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 10px;
    background: #543c27;
    border-radius: 4px;
}

.flame {
    width: 24px;
    height: 40px;
    background: radial-gradient(ellipse at center, #fff176 0%, #ff9800 90%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: absolute;
    top: -35px;
    left: 3px;
    animation: flicker 0.6s ease-in-out infinite;
    box-shadow: 0 0 20px rgba(255,165,0,0.6);
}

.make-wish {
    background: linear-gradient(145deg, #98c1d9, #7ba7bf) !important;
    font-size: 22px !important;
    padding: 20px 40px !important;
    margin: 30px auto !important;
    display: block;
}

#friendMessage {
    background: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 20px;
    margin: 30px auto;
    max-width: 600px;
}

#friendMessage h3 {
    color: #3949ab;
    margin-bottom: 15px;
}

#friendMessage textarea {
    width: 100%;
    min-height: 120px;
    padding: 15px;
    border: 2px solid var(--color-secondary);
    border-radius: 12px;
    font-size: 16px;
    resize: vertical;
    margin: 15px 0;
}

#messageResult {
    margin-top: 15px;
    padding: 15px;
    background: var(--color-light);
    border-radius: 8px;
    display: none;
}

.image-gallery {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 30px auto;
    flex-wrap: wrap;
    max-width: 900px;
}

.image-gallery img {
    width: calc(33.333% - 10px);
    min-width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s;
}

.image-gallery img:hover {
    transform: translateY(-5px);
}

#popupContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9998;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
}

.popup {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.4s;
    max-width: 90%;
    z-index: 9999;
}

.popup.show {
    opacity: 1;
    transform: scale(1);
}

.popup h3 {
    color: var(--color-primary);
    font-size: 26px;
    margin-bottom: 20px;
}

.popup p {
    color: var(--color-dark);
    font-size: 18px;
    margin: 12px 0;
}

#audioControls {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(255,255,255,0.98);
    padding: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    z-index: 1000;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.08);
}

#audioSelect {
    background: var(--color-light);
    border: 2px solid var(--color-secondary);
    padding: 8px 15px;
    border-radius: 8px;
}

#volumeControl {
    width: 100px;
}

#effectsContainer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

#particlesContainer, #fireworksContainer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.particle {
    position: fixed;
    font-size: 24px;
    pointer-events: none;
    z-index: 100;
}

.heart { 
    color: var(--color-accent);
    animation: particleFallHeart 10s ease-in-out forwards;
}

.star { 
    color: var(--color-primary);
    animation: particleFallStar 12s ease-in-out forwards;
}

.butterfly { 
    color: var(--color-secondary);
    animation: particleFallButterfly 14s ease-in-out forwards;
}

.petal {
    position: fixed;
    width: 15px;
    height: 15px;
    background: linear-gradient(45deg, var(--color-secondary), var(--color-light));
    border-radius: 150% 0 150% 0;
    transform: rotate(45deg);
    z-index: 100;
    animation: particleFallPetal 11s ease-in-out forwards;
}

.firework {
    position: fixed;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 150;
    animation: explode 1s ease-out forwards;
}

@keyframes gradientBG {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes flicker {
    0%, 100% { transform: scaleY(1); opacity: 0.9; }
    50% { transform: scaleY(1.05); opacity: 1; }
}

@keyframes particleFallHeart {
    0% { transform: translateY(-5vh) translateX(0) rotate(0deg) scale(1); opacity: 1; }
    25% { transform: translateY(25vh) translateX(calc(var(--drift) * 0.5vw)) rotate(90deg) scale(1.2); }
    50% { transform: translateY(50vh) translateX(calc(var(--drift) * 1vw)) rotate(180deg) scale(0.8); }
    75% { transform: translateY(75vh) translateX(calc(var(--drift) * 0.5vw)) rotate(270deg) scale(1.1); }
    100% { transform: translateY(105vh) translateX(calc(var(--drift) * 1vw)) rotate(360deg); opacity: 0; }
}

@keyframes particleFallStar {
    0% { transform: translateY(-5vh) translateX(0) rotate(0deg); opacity: 1; }
    30% { transform: translateY(30vh) translateX(calc(var(--drift) * -0.7vw)) rotate(120deg); }
    60% { transform: translateY(60vh) translateX(calc(var(--drift) * 1.2vw)) rotate(240deg); }
    100% { transform: translateY(105vh) translateX(calc(var(--drift) * 1vw)) rotate(360deg); opacity: 0; }
}

@keyframes particleFallButterfly {
    0% { transform: translateY(-5vh) translateX(0) rotate(0deg); opacity: 1; }
    20% { transform: translateY(20vh) translateX(calc(var(--drift) * 1.5vw)) rotate(45deg); }
    40% { transform: translateY(40vh) translateX(calc(var(--drift) * -1vw)) rotate(-30deg); }
    60% { transform: translateY(60vh) translateX(calc(var(--drift) * 2vw)) rotate(60deg); }
    80% { transform: translateY(80vh) translateX(calc(var(--drift) * -0.5vw)) rotate(-20deg); }
    100% { transform: translateY(105vh) translateX(calc(var(--drift) * 1vw)) rotate(0deg); opacity: 0; }
}

@keyframes particleFallPetal {
    0% { transform: translateY(-5vh) translateX(0) rotate(45deg); opacity: 1; }
    25% { transform: translateY(25vh) translateX(calc(var(--drift) * -1vw)) rotate(135deg); }
    50% { transform: translateY(50vh) translateX(calc(var(--drift) * 1.5vw)) rotate(225deg); }
    75% { transform: translateY(75vh) translateX(calc(var(--drift) * -0.5vw)) rotate(315deg); }
    100% { transform: translateY(105vh) translateX(calc(var(--drift) * 1vw)) rotate(405deg); opacity: 0; }
}

@keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(15); opacity: 0.5; }
    100% { transform: scale(30); opacity: 0; }
}
    </style>
</head>
<body>
    <div id="musicStart">
        <button onclick="mulaiMusik()">Siap?</button>
    </div>

    <div id="effectsContainer">
        <div id="particlesContainer"></div>
        <div id="fireworksContainer"></div>
    </div>

    <div id="contentContainer">
        <div id="nameInput">
            <h2>Pilih nama yang kamu suka:</h2>
            <div id="nameButtons">
                <button onclick="pilihNama('Haryo')">Haryo</button>
                <button onclick="pilihNama('Iyok')">Iyok</button>
                <button onclick="pilihNama('Odi')">Odi</button>
                <button onclick="pilihNama('Via')">Via</button>
                <button onclick="pilihNama('Febrian')">Febrian</button>
                <button onclick="pilihNama('Nugraha')">Nugraha</button>
            </div>
            <button class="btn-start" onclick="mulaiPerayaan()">Mulai!</button>
        </div>

        <div id="popupContainer"></div>

        <div id="mainContent">
            <h1>Happy Sweet Seventeen, <span id="friendNameDisplay"></span>!</h1>
            <p style="font-size: 24px;">🎉🎂✨</p>

            <div class="image-gallery">
                <img src="https://picsum.photos/300/200?random=1" alt="Gambar 1">
                <img src="https://picsum.photos/300/200?random=2" alt="Gambar 2">
                <img src="https://picsum.photos/300/200?random=3" alt="Gambar 3">
            </div>

            <div id="candleContainer"></div>
            <button onclick="makeWish()" class="make-wish">✨ Make a Wish! ✨</button>

            <div id="friendMessage">
                <h3>Tulis Pesanmu</h3>
                <textarea id="messageText" placeholder="Tuliskan balasan dan harapanmu di sini..."></textarea>
                <button class="btn-action" onclick="kirimPesanSahabat()">Kirim Pesanmu</button>
                <div id="messageResult"></div>
            </div>
        </div>
    </div>

    <div id="audioControls">
        <select id="audioSelect">
            <option value="https://raw.githubusercontent.com/Haigry/Haigry.github.io/main/assets/audio/Romantic%20Birthday%20Song%20for%20Lovers%20No.%202%20in%20A%20Major.mp3">Birthday Song 🎵</option>
        </select>
        <button id="playPauseButton">Play</button>
        <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.7">
    </div>

    <script>
const pesan = [
    "Hai, [Nama] sahabatku yang keren!",
    "Selamat Sweet Seventeen, bestie!",
    "Kamu adalah sahabat terbaik yang bisa kuminta",
    "Semoga persahabatan kita abadi selamanya",
    "Aku bersyukur memilikimu sebagai sahabat!"
];
let indeksPesanSekarang = 0;
let audioElement;

function initAudio() {
    audioElement = new Audio();
    audioElement.loop = true;
    audioElement.volume = 0.7;
    
    const audioSelect = document.getElementById('audioSelect');
    const playPauseButton = document.getElementById('playPauseButton');
    const volumeControl = document.getElementById('volumeControl');
    
    audioSelect.addEventListener('change', function() {
        const wasPlaying = !audioElement.paused;
        audioElement.src = this.value;
        if (wasPlaying) {
            audioElement.play().catch(err => console.error('Playback failed:', err));
        }
    });
    
    playPauseButton.addEventListener('click', () => {
        if (audioElement.paused) {
            audioElement.play();
            playPauseButton.textContent = 'Pause';
        } else {
            audioElement.pause();
            playPauseButton.textContent = 'Play';
        }
    });
    
    volumeControl.addEventListener('input', function() {
        audioElement.volume = this.value;
    });
    
    audioElement.src = audioSelect.value;
}

function mulaiMusik() {
    const musicStart = document.getElementById('musicStart');
    audioElement.play()
        .then(() => {
            musicStart.style.opacity = '0';
            setTimeout(() => {
                musicStart.style.display = 'none';
            }, 500);
        })
        .catch(err => {
            console.error('Playback failed:', err);
            alert('Mohon izinkan pemutaran musik untuk melanjutkan');
        });
}

function pilihNama(nama) {
    document.getElementById('friendNameDisplay').textContent = nama;
    const tombol = document.querySelectorAll('#nameButtons button');
    tombol.forEach(btn => {
        btn.classList.remove('selected');
        if (btn.textContent === nama) {
            btn.classList.add('selected');
        }
    });
    
    let displayEl = document.querySelector('.selected-name-display');
    if (!displayEl) {
        displayEl = document.createElement('div');
        displayEl.className = 'selected-name-display';
        document.getElementById('nameInput').insertBefore(
            displayEl,
            document.querySelector('#nameInput button:last-child')
        );
    }
    displayEl.textContent = `Nama terpilih: ${nama}`;
}

function mulaiPerayaan() {
    const nama = document.getElementById('friendNameDisplay').textContent;
    if (!nama) {
        alert('Pilih namamu dulu ya!');
        return;
    }
    
    document.getElementById('nameInput').style.display = 'none';
    document.getElementById('mainContent').style.display = 'none';
    
    indeksPesanSekarang = 0;
    tampilkanPesanBerikutnya();
    
    if (audioElement.paused) {
        audioElement.play();
    }
    
    buatPartikel();
    buatKembangApi();
}

function tampilkanPesanBerikutnya() {
    const containerPesan = document.getElementById('popupContainer');
    if (indeksPesanSekarang < pesan.length) {
        containerPesan.style.display = 'flex';
        const popup = document.createElement('div');
        popup.className = 'popup';
        const pesanFormatted = pesan[indeksPesanSekarang].replace('[Nama]', 
            document.getElementById('friendNameDisplay').textContent);
        
        popup.innerHTML = `
            <div class="popup-content">
                <p style="font-size: 20px; margin: 20px 0;">${pesanFormatted}</p>
                <button onclick="lanjutPesan()">Lanjut ❤️</button>
            </div>
        `;
        
        containerPesan.innerHTML = '';
        containerPesan.appendChild(popup);
        
        setTimeout(() => popup.classList.add('show'), 100);
        
        indeksPesanSekarang++;
    } else {
        containerPesan.style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        addVirtualCandles();
    }
}

function lanjutPesan() {
    const popup = document.querySelector('.popup');
    if (popup) {
        popup.classList.remove('show');
        setTimeout(() => {
            tampilkanPesanBerikutnya();
        }, 300);
    }
}

function buatPartikel() {
    const particles = [
        { type: '❤', class: 'heart' },
        { type: '⭐', class: 'star' },
        { type: '🦋', class: 'butterfly' },
        { type: 'petal', class: 'petal' }
    ];
    const container = document.getElementById('particlesContainer');
    
    function animate() {
        if (Math.random() < 0.08) {
            const particleConfig = particles[Math.floor(Math.random() * particles.length)];
            const particle = document.createElement('div');
            
            if (particleConfig.type === 'petal') {
                particle.className = 'petal';
            } else {
                particle.className = `particle ${particleConfig.class}`;
                particle.innerHTML = particleConfig.type;
            }

            particle.style.left = `${Math.random() * 100}vw`;
            particle.style.setProperty('--drift', (Math.random() * 20 - 10).toFixed(2));
            
            container.appendChild(particle);
            setTimeout(() => particle.remove(), 15000);
        }
        requestAnimationFrame(animate);
    }
    animate();
}

function buatKembangApi() {
    const container = document.getElementById('fireworksContainer');
    
    function createFirework() {
        if (Math.random() < 0.03) {
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.left = `${20 + Math.random() * 60}vw`;
            firework.style.top = `${20 + Math.random() * 60}vh`;
            const hue = Math.random() * 360;
            firework.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;
            firework.style.boxShadow = `0 0 20px hsl(${hue}, 100%, 50%), 0 0 40px hsl(${hue}, 100%, 50%)`;
            
            container.appendChild(firework);
            setTimeout(() => firework.remove(), 1000);
        }
        requestAnimationFrame(createFirework);
    }
    createFirework();
}

function kirimPesanSahabat() {
    const pesan = document.getElementById('messageText').value;
    if (!pesan.trim()) {
        alert('Mohon tulis pesanmu terlebih dahulu!');
        return;
    }

    const nomorWA = "+6289515583710";
    const pesanURL = encodeURIComponent(pesan);
    window.open(`https://wa.me/${nomorWA}?text=${pesanURL}`, '_blank');
    
    const resultDiv = document.getElementById('messageResult');
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = 'Pesan terkirim! ❤️';
}

function addVirtualCandles() {
    const container = document.getElementById('candleContainer');
    container.innerHTML = '';
    
    for (let i = 0; i < 3; i++) {
        const candle = document.createElement('div');
        candle.className = 'candle';
        candle.innerHTML = '<div class="flame"></div>';
        candle.onclick = () => toggleFlame(candle);
        container.appendChild(candle);
    }
}

function toggleFlame(candle) {
    const flame = candle.querySelector('.flame');
    if (flame) {
        flame.style.display = flame.style.display === 'none' ? 'block' : 'none';
    }
}

function makeWish() {
    const flames = document.querySelectorAll('.flame');
    flames.forEach(flame => {
        flame.style.display = 'none';
    });
    
    const selectedName = document.getElementById('friendNameDisplay').textContent;
    const canvas = document.createElement('canvas');
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    canvas.style.zIndex = '999';
    canvas.style.background = '#111';
    document.body.appendChild(canvas);
    
    const ctx = canvas.getContext('2d');
    const w = canvas.width = window.innerWidth;
    const h = canvas.height = window.innerHeight;
    
    ctx.font = '30px Verdana';
    ctx.fillStyle = '#fff';
    ctx.textAlign = 'center';
    
    let alpha = 0;
    let phase = 'fadeIn';
    
    function animate() {
        ctx.fillStyle = '#111';
        ctx.fillRect(0, 0, w, h);
        
        if (phase === 'fadeIn') {
            alpha += 0.02;
            if (alpha >= 1) {
                alpha = 1;
                phase = 'hold';
                setTimeout(() => { phase = 'fadeOut'; }, 3000);
            }
        } else if (phase === 'fadeOut') {
            alpha -= 0.02;
            if (alpha <= 0) {
                alpha = 0;
                phase = 'done';
            }
        }
        
        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
        ctx.fillText('HAPPY', w/2, h/2 - 50);
        ctx.fillText('BIRTHDAY', w/2, h/2);
        ctx.fillText(selectedName + '!', w/2, h/2 + 50);
        
        if (phase !== 'done') {
            requestAnimationFrame(animate);
        } else {
            document.body.removeChild(canvas);
            showWishPopup();
        }
    }
    
    animate();
}

function showWishPopup() {
    const popupContainer = document.getElementById('popupContainer');
    popupContainer.style.display = 'flex';
    
    const popup = document.createElement('div');
    popup.className = 'popup';
    popup.innerHTML = `
        <div class="popup-content">
            <h3>✨ Make a Wish! ✨</h3>
            <p>Tutup mata, ucapkan doamu...</p>
            <p>Semoga semua harapanmu terkabul! 🌟</p>
            <button onclick="closeWishPopup()">Amin ❤️</button>
        </div>
    `;
    
    popupContainer.innerHTML = '';
    popupContainer.appendChild(popup);
    
    setTimeout(() => popup.classList.add('show'), 100);
}

function closeWishPopup() {
    const popup = document.querySelector('.popup');
    const popupContainer = document.getElementById('popupContainer');
    
    if (popup) {
        popup.classList.remove('show');
        setTimeout(() => {
            popupContainer.style.display = 'none';
            popupContainer.innerHTML = '';
        }, 400);
    }
}

window.addEventListener('load', initAudio);
    </script>
</body>
</html>